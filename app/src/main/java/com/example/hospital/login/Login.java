package com.example.hospital.login;import android.app.ProgressDialog;import android.os.Bundle;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import androidx.databinding.DataBindingUtil;import androidx.fragment.app.Fragment;import androidx.navigation.Navigation;import es.dmoral.toasty.Toasty;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.EditText;import android.widget.ImageView;import android.widget.Toast;import android.widget.Toolbar;import com.example.hospital.R;import com.example.hospital.databinding.FragmentLoginBinding;import com.google.android.gms.tasks.OnCompleteListener;import com.google.android.gms.tasks.Task;import com.google.firebase.auth.AuthResult;import com.google.firebase.auth.FirebaseAuth;import com.google.firebase.auth.FirebaseUser;/** * A simple {@link Fragment} subclass. */public class Login extends Fragment {    FragmentLoginBinding loginBinding;    FirebaseAuth mAuth;    EditText email, password;    ProgressDialog progressDialog;    public Login() {        // Required empty public constructor    }    @Override    public void onStart() {        super.onStart();    }    @Override    public View onCreateView(LayoutInflater inflater, ViewGroup container,                             Bundle savedInstanceState) {        // Inflate the layout for this fragment        loginBinding = DataBindingUtil.inflate(inflater, R.layout.fragment_login, null, false);        View view = loginBinding.getRoot();        email = view.findViewById(R.id.email);        password = view.findViewById(R.id.password);        mAuth = FirebaseAuth.getInstance();        progressDialog = new ProgressDialog(getContext());        return view;    }    @Override    public void onViewCreated(@NonNull final View view, @Nullable Bundle savedInstanceState) {        super.onViewCreated(view, savedInstanceState);        loginBinding.setEvent(new Presenter() {            @Override            public void Signup_Event() {                Navigation.findNavController(view).navigate(R.id.action_login_to_signup);            }            @Override            public void Signin_Event() {                String _email = email.getText().toString();                String _password = password.getText().toString();                progressDialog.show();                progressDialog.setMessage("Please wait.....");                if (_email.isEmpty() || _password.isEmpty()) {                    Toasty.error(getContext(), "Enter email and password", Toast.LENGTH_LONG).show();                    progressDialog.dismiss();                } else {                    mAuth.signInWithEmailAndPassword(_email, _password).addOnCompleteListener(new OnCompleteListener<AuthResult>() {                        @Override                        public void onComplete(@NonNull Task<AuthResult> task) {                            if (task.isSuccessful()) {                                progressDialog.dismiss();                                Navigation.findNavController(view).navigate(R.id.action_login_to_patient);                            } else {                                Toasty.error(getContext(), "Error Try again!!!!", Toast.LENGTH_LONG).show();                                email.setText("");                                password.setText("");                                progressDialog.dismiss();                            }                        }                    });                }            }        });    }}